<div class="admin-layout">
    <!-- 顶部导航栏（深色） -->
    <nav class="navbar navbar-dark" style="background-color: #1a2b3c;">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">
                <i class="fas fa-cog me-2"></i>管理员后台
            </span>
            <div>
                <a href="{{ url_for('main.home') }}" class="btn btn-sm btn-outline-light me-2">
                    <i class="fas fa-home me-1"></i>前台
                </a>
                <a href="{{ url_for('auth.logout') }}" class="btn btn-sm btn-outline-light">
                    <i class="fas fa-sign-out-alt me-1"></i>退出
                </a>
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-3">
        <div class="row">
            <!-- 左侧导航栏 - 深色背景 -->
            <div class="col-2 px-0" style="min-height: calc(100vh - 70px); background-color: #2c3e50;">
                <div class="list-group list-group-flush" style="background-color: #2c3e50; border-radius: 0;">
                    <!-- 动态加载管理员菜单 -->
                    {% if admin_menu %}
                        {% for menu_item in admin_menu %}
                            {% if menu_item.type == 'parent' and menu_item.children %}
                                <!-- 父菜单（深色） -->
                                <div class="list-group-item" style="background-color: #34495e; color: #ecf0f1; border: none; border-bottom: 1px solid #3d566e; font-weight: bold;">
                                    <i class="{{ menu_item.icon }} me-2" style="color: #f39c12;"></i>{{ menu_item.title }}
                                </div>
                                <!-- 子菜单 -->
                                {% for child in menu_item.children %}
                                <a href="{{ url_for(child.endpoint) if child.endpoint != '#' else '#' }}"
                                   class="list-group-item list-group-item-action ps-4"
                                   style="background-color: #2c3e50; color: #bdc3c7; border: none; border-bottom: 1px solid #34495e; {% if request.endpoint and child.endpoint in request.endpoint %}background-color: #3498db; color: white;{% endif %}"
                                   onmouseover="this.style.backgroundColor='#34495e'; this.style.color='white';"
                                   onmouseout="this.style.backgroundColor={% if request.endpoint and child.endpoint in request.endpoint %}'#3498db'{% else %}'#2c3e50'{% endif %}; this.style.color={% if request.endpoint and child.endpoint in request.endpoint %}'white'{% else %}'#bdc3c7'{% endif %};">
                                    <i class="{{ child.icon }} me-2" style="color: {% if request.endpoint and child.endpoint in request.endpoint %}white{% else %}#f39c12{% endif %};"></i>{{ child.title }}
                                </a>
                                {% endfor %}
                            {% else %}
                                <!-- 普通菜单项 -->
                                <a href="{{ url_for(menu_item.endpoint) if menu_item.endpoint != '#' else '#' }}"
                                   class="list-group-item list-group-item-action"
                                   style="background-color: #2c3e50; color: #ecf0f1; border: none; border-bottom: 1px solid #34495e; {% if request.endpoint and menu_item.endpoint in request.endpoint %}background-color: #3498db; color: white;{% endif %}"
                                   onmouseover="this.style.backgroundColor='#34495e';"
                                   onmouseout="this.style.backgroundColor={% if request.endpoint and menu_item.endpoint in request.endpoint %}'#3498db'{% else %}'#2c3e50'{% endif %};">
                                    <i class="{{ menu_item.icon }} me-2" style="color: {% if request.endpoint and menu_item.endpoint in request.endpoint %}white{% else %}#f39c12{% endif %};"></i>{{ menu_item.title }}
                                </a>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                </div>
            </div>

            <!-- 右侧内容区域 - 浅色背景 -->
            <div class="col-10">
                <!-- 面包屑导航 -->
                <nav aria-label="breadcrumb" class="mt-2">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="{{ url_for('admin.dashboard') }}" style="color: #3498db;">首页</a></li>
                        {% block breadcrumb %}{% endblock %}
                    </ol>
                </nav>

                <!-- 页面标题 -->
                <div class="d-flex justify-content-between align-items-center mt-3 mb-3">
                    <h3 style="color: #2c3e50;">{% block page_title %}{% endblock %}</h3>
                    {% block page_actions %}{% endblock %}
                </div>

                <!-- 消息提示 -->
                {% include 'partials/messages.html' %}

                <!-- 主要内容卡片（浅色） -->
                <div class="card shadow-sm" style="background-color: #ffffff; border: none;">
                    <div class="card-body">
                        {% block admin_content %}{% endblock %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.admin-layout {
    background-color: #ecf0f1;
    min-height: 100vh;
}
/* 左侧菜单滚动条样式 */
.col-2::-webkit-scrollbar {
    width: 6px;
}
.col-2::-webkit-scrollbar-track {
    background: #2c3e50;
}
.col-2::-webkit-scrollbar-thumb {
    background: #34495e;
    border-radius: 3px;
}
.col-2::-webkit-scrollbar-thumb:hover {
    background: #3d566e;
}
/* 面包屑样式 */
.breadcrumb-item + .breadcrumb-item::before {
    color: #7f8c8d;
}
.breadcrumb-item.active {
    color: #2c3e50;
}
/* 卡片阴影效果 */
.card {
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
}
</style>